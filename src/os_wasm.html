<!DOCTYPE html>
<head>
<style>
    html,body {
        width: 100%;
        height: 100%;
        margin: 0;
    }
    canvas {
        background-color: #cccccc;
        display: block;
        position: absolute;
        width: 100%;
        height: 100%;
    }
</style>
<script>

var ctx = {};

function js_time() {
    return new Date().getTime()*1000;
}

function js_write(data, len) {
    var bytes = new Uint8Array(ctx.memory.buffer, data, len);
    var string = new TextDecoder('utf8').decode(bytes);
    console.log(string);
}
function js_exit() { console.log("Exit"); }

WebAssembly.instantiateStreaming(fetch('quest-for-nothing-opt.wasm'), {
    env: {
    js_time,
    js_exit,
    js_write,
    },
}).then(({instance}) => {
    ctx.memory = instance.exports.memory;
    ctx.js_main = instance.exports.js_main;
    ctx.js_main();
});
</script>
</head>
<body>
<canvas id='canvas'></canvas>
</body>
